{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1/breeds';\nconst API_KEY =\n  'live_1BhCbAxOfyNpYIgTYCWiXZS6lDLk1jq88WQSVrpMPuPstv7Ox0sVSsaxQgcHHrTK';\n\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nlet errorDisplayed = false;\nexport function fetchBreeds() {\n  showLoader();\n\n  return axios\n    .get(BASE_URL)\n    .then(response => {\n      hideLoader();\n      return response.data;\n    })\n    .catch(error => {\n      handleError(error);\n      throw error;\n    });\n}\n\nexport function fetchCatByBreed(breedId) {\n  const CAT_API_URL = 'https://api.thecatapi.com/v1/images/search';\n  showLoader();\n\n  return axios\n    .get(CAT_API_URL, {\n      params: {\n        breed_ids: breedId,\n      },\n    })\n    .then(response => {\n      hideLoader();\n      return response.data;\n    })\n    .catch(error => {\n      handleError(error);\n      throw error;\n    });\n}\n\nexport function showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nexport function handleError(error) {\n  console.error('Error:', error);\n\n  if (!errorDisplayed) {\n    showError('Oops! Something went wrong! Try reloading the page!');\n    errorDisplayed = true;\n  }\n}\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n","import {\n  fetchBreeds,\n  fetchCatByBreed,\n  showLoader,\n  hideLoader,\n  handleError,\n} from './cat-api.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const elements = {\n    breedSelect: document.querySelector('.breed-select'),\n    catInfo: document.querySelector('.cat-info'),\n    loader: document.querySelector('.loader'),\n  };\n\n  const slimSelect = new SlimSelect({\n    select: elements.breedSelect,\n    placeholder: 'Select a breed',\n    showSearch: true,\n    searchText: 'No matches found',\n    searchPlaceholder: 'Search...',\n    searchHighlight: true,\n    searchFocus: true,\n    allowDeselect: false,\n    onChange: handleBreedSelectChange,\n  });\n\n  elements.breedSelect.addEventListener('change', handleBreedSelectChange);\n\n  let errorDisplayed = false;\n\n  function handleBreedSelectChange() {\n    const selectedBreedId = slimSelect.selected();\n\n    if (selectedBreedId) {\n      showLoader();\n    }\n\n    fetchCatByBreed(selectedBreedId)\n      .then(displayCatInfo)\n      .catch(error => handleError(error, errorDisplayed))\n      .finally(() => {\n        if (selectedBreedId) {\n          hideLoader();\n        }\n      });\n  }\n\n  function displayCatInfo(catData) {\n    elements.catInfo.innerHTML = createMarkup(catData);\n  }\n\n  function serviceCatSearch() {\n    hideLoader();\n    errorDisplayed = false;\n\n    showLoader();\n\n    return fetchBreeds()\n      .then(displayBreeds)\n      .catch(error => handleError(error, errorDisplayed))\n      .finally(() => {\n        hideLoader();\n      });\n  }\n\n  function displayBreeds(data) {\n    console.log(data);\n    elements.breedSelect.innerHTML = '';\n    data.forEach(catBreed => {\n      const option = document.createElement('option');\n      option.value = catBreed.id;\n      option.textContent = catBreed.name;\n      elements.breedSelect.appendChild(option);\n    });\n\n    slimSelect.setData(\n      data.map(catBreed => ({ text: catBreed.name, value: catBreed.id }))\n    );\n  }\n\n  function createMarkup(catData) {\n    return catData\n      .map(({ url, breeds }) => {\n        const [firstBreed] = breeds;\n\n        return `\n          <img src=\"${url}\" alt=\"${firstBreed.name}\" width=\"300\">\n          <div>\n            <h3>${firstBreed.name}</h3>\n            <p><strong>Description:</strong> ${firstBreed.description}</p>\n            <p><strong>Temperament:</strong> ${firstBreed.temperament}</p>\n          </div>\n        `;\n      })\n      .join('');\n  }\n\n  serviceCatSearch();\n});\n"],"names":["BASE_URL","API_KEY","axios","errorDisplayed","fetchBreeds","showLoader","response","hideLoader","error","handleError","fetchCatByBreed","breedId","CAT_API_URL","loader","showError","message","iziToast","elements","slimSelect","handleBreedSelectChange","selectedBreedId","displayCatInfo","catData","createMarkup","serviceCatSearch","displayBreeds","data","catBreed","option","url","breeds","firstBreed"],"mappings":"6vBAGA,MAAMA,EAAW,sCACXC,EACJ,wEAEFC,EAAM,SAAS,QAAQ,OAAO,aAAeD,EAE7C,IAAIE,EAAiB,GACd,SAASC,GAAc,CAC5B,OAAAC,IAEOH,EACJ,IAAIF,CAAQ,EACZ,KAAKM,IACJC,IACOD,EAAS,KACjB,EACA,MAAME,GAAS,CACd,MAAAC,EAAYD,CAAK,EACXA,CACZ,CAAK,CACL,CAEO,SAASE,EAAgBC,EAAS,CACvC,MAAMC,EAAc,6CACpB,OAAAP,IAEOH,EACJ,IAAIU,EAAa,CAChB,OAAQ,CACN,UAAWD,CACZ,CACP,CAAK,EACA,KAAKL,IACJC,IACOD,EAAS,KACjB,EACA,MAAME,GAAS,CACd,MAAAC,EAAYD,CAAK,EACXA,CACZ,CAAK,CACL,CAEO,SAASH,GAAa,CAC3B,MAAMQ,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OACzB,CAEO,SAASN,GAAa,CAC3B,MAAMM,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,MACzB,CAEO,SAASJ,EAAYD,EAAO,CACjC,QAAQ,MAAM,SAAUA,CAAK,EAExBL,IACHW,EAAU,qDAAqD,EAC/DX,EAAiB,GAErB,CAEA,SAASW,EAAUC,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,UACd,CAAG,CACH,CC9DA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAME,EAAW,CACf,YAAa,SAAS,cAAc,eAAe,EACnD,QAAS,SAAS,cAAc,WAAW,EAC3C,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAEQC,EAAa,IAAI,WAAW,CAChC,OAAQD,EAAS,YACjB,YAAa,iBACb,WAAY,GACZ,WAAY,mBACZ,kBAAmB,YACnB,gBAAiB,GACjB,YAAa,GACb,cAAe,GACf,SAAUE,CACd,CAAG,EAEDF,EAAS,YAAY,iBAAiB,SAAUE,CAAuB,EAIvE,SAASA,GAA0B,CACjC,MAAMC,EAAkBF,EAAW,WAE/BE,GACFf,IAGFK,EAAgBU,CAAe,EAC5B,KAAKC,CAAc,EACnB,MAAMb,GAASC,EAAYD,CAAqB,CAAC,EACjD,QAAQ,IAAM,CACTY,GACFb,GAEV,CAAO,CACJ,CAED,SAASc,EAAeC,EAAS,CAC/BL,EAAS,QAAQ,UAAYM,EAAaD,CAAO,CAClD,CAED,SAASE,GAAmB,CAC1B,OAAAjB,IAGAF,IAEOD,EAAa,EACjB,KAAKqB,CAAa,EAClB,MAAMjB,GAASC,EAAYD,CAAqB,CAAC,EACjD,QAAQ,IAAM,CACbD,GACR,CAAO,CACJ,CAED,SAASkB,EAAcC,EAAM,CAC3B,QAAQ,IAAIA,CAAI,EAChBT,EAAS,YAAY,UAAY,GACjCS,EAAK,QAAQC,GAAY,CACvB,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,MAAQD,EAAS,GACxBC,EAAO,YAAcD,EAAS,KAC9BV,EAAS,YAAY,YAAYW,CAAM,CAC7C,CAAK,EAEDV,EAAW,QACTQ,EAAK,IAAIC,IAAa,CAAE,KAAMA,EAAS,KAAM,MAAOA,EAAS,EAAE,EAAG,CACxE,CACG,CAED,SAASJ,EAAaD,EAAS,CAC7B,OAAOA,EACJ,IAAI,CAAC,CAAE,IAAAO,EAAK,OAAAC,KAAa,CACxB,KAAM,CAACC,CAAU,EAAID,EAErB,MAAO;AAAA,sBACOD,WAAaE,EAAW;AAAA;AAAA,kBAE5BA,EAAW;AAAA,+CACkBA,EAAW;AAAA,+CACXA,EAAW;AAAA;AAAA,SAG1D,CAAO,EACA,KAAK,EAAE,CACX,CAEDP,GACF,CAAC"}