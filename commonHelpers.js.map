{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1/breeds';\nconst API_KEY =\n  'live_1BhCbAxOfyNpYIgTYCWiXZS6lDLk1jq88WQSVrpMPuPstv7Ox0sVSsaxQgcHHrTK';\n\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nexport function fetchBreeds() {\n  showLoader();\n\n  return axios\n    .get(BASE_URL)\n    .then(response => {\n      hideLoader();\n      return response.data;\n    })\n    .catch(error => {\n      showError();\n      console.error('Error fetching cat breeds:', error);\n      throw error;\n    });\n}\n\nexport function fetchCatByBreed(breedId) {\n  const CAT_API_URL = 'https://api.thecatapi.com/v1/images/search';\n  showLoader();\n\n  return axios\n    .get(CAT_API_URL, {\n      params: {\n        breed_ids: breedId,\n      },\n    })\n    .then(response => {\n      hideLoader();\n      return response.data;\n    })\n    .catch(error => {\n      showError();\n      console.error('Error fetching cat data by breed:', error);\n      throw error;\n    });\n}\n\nfunction showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.add('visible');\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.classList.remove('visible');\n}\n\nfunction showError() {\n  const errorElement = document.querySelector('.error');\n  errorElement.classList.add('visible');\n}\n\nfunction hideError() {\n  const errorElement = document.querySelector('.error');\n  errorElement.classList.remove('visible');\n}\n","import { fetchBreeds, fetchCatByBreed } from './cat-api.js';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const elements = {\n    breedSelect: document.querySelector('.breed-select'),\n    catInfo: document.querySelector('.cat-info'),\n    loader: document.querySelector('.loader'),\n    error: document.querySelector('.error'),\n  };\n\n  const slimSelect = new SlimSelect({\n    select: elements.breedSelect,\n    placeholder: 'Select a breed',\n    showSearch: true,\n    searchText: 'No matches found',\n    searchPlaceholder: 'Search...',\n    searchHighlight: true,\n    searchFocus: true,\n    allowDeselect: false,\n    onChange: function () {\n      handleBreedSelectChange();\n    },\n  });\n\n  elements.breedSelect.addEventListener('change', handleBreedSelectChange);\n\n  function handleBreedSelectChange() {\n    const selectedBreedId = slimSelect.selected();\n\n    showLoader();\n\n    fetchCatByBreed(selectedBreedId)\n      .then(displayCatInfo)\n      .catch(handleError)\n      .finally(hideLoader);\n  }\n\n  function displayCatInfo(catData) {\n    elements.catInfo.innerHTML = createMarkup(catData);\n  }\n\n  function showLoader() {\n    elements.loader.classList.add('loading');\n  }\n\n  function hideLoader() {\n    elements.loader.classList.remove('loading');\n  }\n\n  function showError() {\n    elements.error.classList.add('visible');\n  }\n\n  function hideError() {\n    elements.error.classList.remove('visible');\n  }\n\n  function handleError(error) {\n    console.error(error);\n    showError();\n  }\n\n  function serviceCatSearch() {\n    hideError();\n    showLoader();\n    return fetchBreeds()\n      .then(displayBreeds)\n      .catch(handleError)\n      .finally(hideLoader);\n  }\n\n  function displayBreeds(data) {\n    console.log(data);\n    elements.breedSelect.innerHTML = '';\n    data.forEach(catBreed => {\n      const option = document.createElement('option');\n      option.value = catBreed.id;\n      option.textContent = catBreed.name;\n      elements.breedSelect.appendChild(option);\n    });\n\n    slimSelect.setData(\n      data.map(catBreed => ({ text: catBreed.name, value: catBreed.id }))\n    );\n  }\n\n  function createMarkup(catData) {\n    return catData\n      .map(({ url, breeds }) => {\n        const [firstBreed] = breeds;\n\n        return `\n          <img src=\"${url}\" alt=\"${firstBreed.name}\" width=\"300\">\n          <div>\n            <h3>${firstBreed.name}</h3>\n            <p><strong>Description:</strong> ${firstBreed.description}</p>\n            <p><strong>Temperament:</strong> ${firstBreed.temperament}</p>\n          </div>\n        `;\n      })\n      .join('');\n  }\n\n  serviceCatSearch();\n});\n"],"names":["BASE_URL","API_KEY","axios","fetchBreeds","showLoader","response","hideLoader","error","showError","fetchCatByBreed","breedId","CAT_API_URL","elements","slimSelect","handleBreedSelectChange","selectedBreedId","displayCatInfo","handleError","catData","createMarkup","hideError","serviceCatSearch","displayBreeds","data","catBreed","option","url","breeds","firstBreed"],"mappings":"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"}